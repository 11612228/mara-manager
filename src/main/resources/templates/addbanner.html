<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="icon" type="images/jpg" href="./images/favicon.jpg">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!--<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport">-->
    <title>Advanced Low dimensional Materials Lab </title>
    <!--     <title> 南方科技大学</title>-->
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="renderer" content="webkit">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <link rel="stylesheet" type="text/css" href="/css/mcommon.css">
    <link rel="stylesheet" type="text/css" href="/css/add.css">

    <script src="/js/jquery.min.js"></script>
</head>

<body style="">
<div class="header">
    <h5 th:text="${userInfoBean.getRealName()}">
    </h5>
    <a href="/mIndex?id=404">Logout</a>
</div>
<div class="nav-wrapper">
    <div class="nav">
        <div class="pc-nav">
            <ul>
                <li class="">
                    <a href="/mIndex?id=0">Home</a>
                </li>

                <li class="">

                    <a href="/mIndex?id=1">UserInfo</a>
                    <ul class="dropdown-menu">
                        <li class="dropdown-element">
                            <a href="/mIndex?id=1">Account List</a>
                        </li>
                        <li class="dropdown-element">
                            <a href="/mIndex?id=12">Create Account</a>
                        </li>

                    </ul>
                </li>

                <li class="">
                    <a href="/mIndex?id=2">Pictures</a>
                    <ul class="dropdown-menu">
                        <li class="dropdown-element">
                            <a href="/mIndex?id=2">Pictures List</a>
                        </li>
                        <li class="dropdown-element">
                            <a href="/mIndex?id=22">Add Pictures</a>
                        </li>
                    </ul>
                </li>
                <li class="">
                    <a href="/mIndex?id=3">Publication</a>
                    <ul class="dropdown-menu">
                        <li class="dropdown-element">
                            <a href="/mIndex?id=3">Publication List</a>
                        </li>
                        <li class="dropdown-element">
                            <a href="/mIndex?id=32">Add Publication</a>
                        </li>
                    </ul>
                </li>
                <li class="">
                    <a href="/mIndex?id=4">Banner</a>
                    <ul class="dropdown-menu">
                        <li class="dropdown-element">
                            <a href="/mIndex?id=4">Banner List</a>
                        </li>
                        <li class="dropdown-element">
                            <a href="/mIndex?id=42">Add Banner</a>
                        </li>
                    </ul>
                </li>
                <li class="">
                    <a href="/mIndex?id=5">News</a>
                    <ul class="dropdown-menu">
                        <li class="dropdown-element">
                            <a href="/mIndex?id=5">News List</a>
                        </li>
                        <li class="dropdown-element">
                            <a href="/mIndex?id=52">Add News</a>
                        </li>
                    </ul>
                </li>
                <!--<li class="">-->
                <!--<a href="/mIndex?id=2">Alumni</a>-->
                <!--</li>-->
            </ul>
        </div>
    </div>
</div>

<div class="main-wrap">
    <div class="main">
        <div class="center">
        <div>Img
        </div>
        <input class="file" name="file" id="uploadimgs" onchange="setImagePreview(this,'localImag','img1');" type="file"/>
        <div id="localImag">
            <img id="img1" alt="" border="1"/>
        </div>
        <button class="reg-btn" id="upload" onclick="upload()">
            Upload
        </button>
        </div>
    </div>
</div>

<script type="text/javascript">
    function setImagePreview(docObj,localImag,imgObjPreviewId){
        var localImagDiv  = document.getElementById(localImag);
        var imgObjPreview = document.getElementById(imgObjPreviewId);
        if(docObj.files && docObj.files[0]){
            //火狐下，直接设img属性
            imgObjPreview.style.display = 'block';
            imgObjPreview.style.width = '200px';
            imgObjPreview.style.height = '300px';

            //火狐7以上版本不能用上面的getAsDataURL()方式获取，需要一下方式
            imgObjPreview.src = window.URL.createObjectURL(docObj.files[0]);
        }else{
            //IE下，使用滤镜
            docObj.select();
            var imgSrc = document.selection.createRange().text;

            //必须设置初始大小
            localImagDiv.style.width = "100px";
            localImagDiv.style.height = "120px";

            //图片异常的捕捉，防止用户修改后缀来伪造图片
            try{
                localImagDiv.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale)";
                localImagDiv.filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src = imgSrc;
            }catch(e){
                alert("您上传的图片格式不正确，请重新选择!");
                return false;
            }
            imgObjPreview.style.display = 'none';
            document.selection.empty();
        }
        return true;
    }
</script>

<script type="text/javascript">
    function post(URL)
    {
        var temp = document.createElement("form");
        temp.action = URL;
        temp.method = "post";
        temp.enctype="multipart/form-data"
        temp.style.display = "none";
        temp.appendChild(document.getElementById("uploadimgs"));
        document.body.appendChild(temp);
        temp.submit();
        return temp;
    }
    function upload() {
            post("/newBanner");
    }
</script>

</body>
</html>